<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MATCHES EDIT</title>
  </head>
  <style>
    h1 {
      font-family: "Noto Sans";
      margin-top: 10px;
      font-size: 42px;
      text-align: center;
      color: #a50c0c;
      font-weight: bold;
    }
    th {
      font-family: "Noto Sans";
      font-size: 24px;
      text-align: center;
      font-weight: bold;
      color: #a50c0c;
      border-width: 2px;
    }
    tr {
      width: 1000px;
    }
    td {
      font-family: "Noto Sans";
      font-size: 21px;
      text-align: center;
      border-width: 2px;
      padding: 10px;
    }
    table {
      border-collapse: collapse;
      margin-left: auto;
      margin-right: auto;
    }
    .tnum {
      width: 200px;
    }
    .tname {
      width: 450px;
    }
    .tcode {
      width: 300px;
    }
  </style>

  <body>
    <h1>UVRC - PRACTICE/QUALIFICATION MATCHES EDIT</h1>
    <table border="white" id="mytable">
      <tr>
        <td>
          <form action="http://192.168.95.70:3000/team/1" id="form1" name="KAT">
            <input type="number" name="teamid" />
          </form>
        </td>
        <td class="tname">KAT</td>
        <td class="tcode">KAT</td>
      </tr>
      <tr>
        <td>
          <form action="http://192.168.95.70:3000/team/2" id="form2" name="ABS">
            <input type="number" name="teamid" />
          </form>
        </td>
        <td class="tname">Absolute</td>
        <td class="tcode">ABS</td>
      </tr>
      <tr>
        <td>
          <form action="http://192.168.95.70:3000/team/3" id="form3" name="URA">
            <input type="number" name="teamid" />
          </form>
        </td>
        <td class="tname">URAS</td>
        <td class="tcode">URA</td>
      </tr>
      <tr>
        <td>
          <form action="http://192.168.95.70:3000/team/4" id="form4" name="99F">
            <input type="number" name="teamid" />
          </form>
        </td>
        <td class="tname">99FSC TechMate</td>
        <td class="tcode">99F</td>
      </tr>
      <tr>
        <td>
          <form action="http://192.168.95.70:3000/team/5" id="form5" name="RAS">
            <input type="number" name="teamid" />
          </form>
        </td>
        <td class="tname">RISE AND SHINE</td>
        <td class="tcode">RAS</td>
      </tr>
      <tr>
        <td>
          <form action="http://192.168.95.70:3000/team/6" id="form6" name="COS">
            <input type="number" name="teamid" />
          </form>
        </td>
        <td class="tname">COS</td>
        <td class="tcode">COS</td>
      </tr>
      <tr>
        <td>
          <form action="http://192.168.95.70:3000/team/7" id="form7" name="CRA">
            <input type="number" name="teamid" />
          </form>
        </td>
        <td class="tname">CRAS</td>
        <td class="tcode">CRA</td>
      </tr>
      <tr>
        <td>
          <form action="http://192.168.95.70:3000/team/8" id="form8" name="ENT">
            <input type="number" name="teamid" />
          </form>
        </td>
        <td class="tname">ENTERPRISE</td>
        <td class="tcode">ENT</td>
      </tr>
      <tr>
        <td>
          <form action="http://192.168.95.70:3000/team/9" id="form9" name="FRT">
            <input type="number" name="teamid" />
          </form>
        </td>
        <td class="tname">FRITS</td>
        <td class="tcode">FRT</td>
      </tr>
      <tr>
        <td>
          <form
            action="http://192.168.95.70:3000/team/10"
            id="form10"
            name="PKK"
          >
            <input type="number" name="teamid" />
          </form>
        </td>
        <td class="tname">PKK - Explosion Of Energy</td>
        <td class="tcode">PKK</td>
      </tr>
      <tr>
        <td>
          <form
            action="http://192.168.95.70:3000/team/11"
            id="form11"
            name="SYH"
          >
            <input type="number" name="teamid" />
          </form>
        </td>
        <td class="tname">STEAM Yên Hòa</td>
        <td class="tcode">SYH</td>
      </tr>
      <tr>
        <td>
          <form
            action="http://192.168.95.70:3000/team/12"
            id="form12"
            name="PIT"
          >
            <input type="number" name="teamid" />
          </form>
        </td>
        <td class="tname">PioTech</td>
        <td class="tcode">PIT</td>
      </tr>
      <tr>
        <td>
          <form
            action="http://192.168.95.70:3000/team/13"
            id="form13"
            name="FBG"
          >
            <input type="number" name="teamid" />
          </form>
        </td>
        <td class="tname">FBG Prime</td>
        <td class="tcode">FBG</td>
      </tr>
      <tr>
        <td>
          <form
            action="http://192.168.95.70:3000/team/14"
            id="form14"
            name="GRL"
          >
            <input type="number" name="teamid" />
          </form>
        </td>
        <td class="tname">Greased Lightning</td>
        <td class="tcode">GRL</td>
      </tr>
      <tr>
        <td>
          <form
            action="http://192.168.95.70:3000/team/15"
            id="form15"
            name="FAF"
          >
            <input type="number" name="teamid" />
          </form>
        </td>
        <td class="tname">Fantastic Five</td>
        <td class="tcode">FAF</td>
      </tr>
      <tr>
        <td>
          <form
            action="http://192.168.95.70:3000/team/16"
            id="form16"
            name="ROE"
          >
            <input type="number" name="teamid" />
          </form>
        </td>
        <td class="tname">Robotech Explorer</td>
        <td class="tcode">ROE</td>
      </tr>
    </table>

    <script>
      async function postFormDataAsJson(url, formData) {
        const formDataJsonString = JSON.stringify(formData);
        console.log(formDataJsonString);
        const fetchOptions = {
          method: "PATCH",
          headers: {
            "Content-Type": "application/json",
            Accept: "application/json",
          },
          body: formDataJsonString,
        };

        const response = await fetch(url, fetchOptions);

        if (!response.ok) {
          const errorMessage = await response.text();
          throw new Error(errorMessage);
        }

        return response.json();
      }

      async function handleFormSubmit(event) {
        event.preventDefault();

        const form = event.currentTarget;
        const url = form.action;
        console.log(url);
        try {
          const formData = new FormData(form);
          const plainFormData = Object.fromEntries(formData.entries());
          const responseData = await postFormDataAsJson(url, plainFormData);

          console.log({ responseData });
        } catch (error) {
          console.error(error);
        }
      }
      async function send(event) {
        event.preventDefault();
        const form = event.currentTarget;
        const name = form.name;
        try {
          const formData = new FormData(form);
          const plainFormData = Object.fromEntries(formData.entries());
          console.log(name);
          getteamid(plainFormData.teamid, name);
        } catch (error) {
          console.error(error);
        }
      }
      async function getteamid(teamid, name) {
        if (teamid == 1) {
          try {
            const responseData = await postFormDataAsJson(
              "http://192.168.95.70:3000/pmmatches/PM1",
              { red1: name }
            );
            const responseData2 = await postFormDataAsJson(
              "http://192.168.95.70:3000/qmmatches/QM1.1",
              { red1: name }
            );
            const responseData3 = await postFormDataAsJson(
              "http://192.168.95.70:3000/qmmatches/QM2.4",
              { blue1: name }
            );

            console.log({ responseData });
            console.log({ responseData2 });
            console.log({ responseData3 });
          } catch (error) {
            console.error(error);
          }
        }
        if (teamid == 2) {
          try {
            const responseData = await postFormDataAsJson(
              "http://192.168.95.70:3000/pmmatches/PM1",
              { red2: name }
            );
            const responseData2 = await postFormDataAsJson(
              "http://192.168.95.70:3000/qmmatches/QM1.2",
              { red1: name }
            );
            const responseData3 = await postFormDataAsJson(
              "http://192.168.95.70:3000/qmmatches/QM2.1",
              { blue2: name }
            );

            console.log({ responseData });
            console.log({ responseData2 });
            console.log({ responseData3 });
          } catch (error) {
            console.error(error);
          }
        }
        if (teamid == 3) {
          try {
            const responseData = await postFormDataAsJson(
              "http://192.168.95.70:3000/pmmatches/PM1",
              { blue1: name }
            );
            const responseData2 = await postFormDataAsJson(
              "http://192.168.95.70:3000/qmmatches/QM1.3",
              { red1: name }
            );
            const responseData3 = await postFormDataAsJson(
              "http://192.168.95.70:3000/qmmatches/QM2.3",
              { blue1: name }
            );
            console.log({ responseData });
            console.log({ responseData2 });
            console.log({ responseData3 });
          } catch (error) {
            console.error(error);
          }
        }
        if (teamid == 4) {
          try {
            const responseData = await postFormDataAsJson(
              "http://192.168.95.70:3000/pmmatches/PM1",
              { blue2: name }
            );
            const responseData2 = await postFormDataAsJson(
              "http://192.168.95.70:3000/qmmatches/QM1.4",
              { red1: name }
            );
            const responseData3 = await postFormDataAsJson(
              "http://192.168.95.70:3000/qmmatches/QM2.2",
              { blue2: name }
            );
            console.log({ responseData });
            console.log({ responseData2 });
            console.log({ responseData3 });
          } catch (error) {
            console.error(error);
          }
        }
        if (teamid == 5) {
          try {
            const responseData = await postFormDataAsJson(
              "http://192.168.95.70:3000/pmmatches/PM2",
              { red1: name }
            );
            const responseData2 = await postFormDataAsJson(
              "http://192.168.95.70:3000/qmmatches/QM1.1",
              { red2: name }
            );
            const responseData3 = await postFormDataAsJson(
              "http://192.168.95.70:3000/qmmatches/QM2.4",
              { red2: name }
            );
            console.log({ responseData });
            console.log({ responseData2 });
            console.log({ responseData3 });
          } catch (error) {
            console.error(error);
          }
        }
        if (teamid == 6) {
          try {
            const responseData = await postFormDataAsJson(
              "http://192.168.95.70:3000/pmmatches/PM2",
              { red2: name }
            );
            const responseData2 = await postFormDataAsJson(
              "http://192.168.95.70:3000/qmmatches/QM1.2",
              { red2: name }
            );
            const responseData3 = await postFormDataAsJson(
              "http://192.168.95.70:3000/qmmatches/QM2.3",
              { blue2: name }
            );
            console.log({ responseData });
            console.log({ responseData2 });
            console.log({ responseData3 });
          } catch (error) {
            console.error(error);
          }
        }
        if (teamid == 7) {
          try {
            const responseData = await postFormDataAsJson(
              "http://192.168.95.70:3000/pmmatches/PM2",
              { blue1: name }
            );
            const responseData2 = await postFormDataAsJson(
              "http://192.168.95.70:3000/qmmatches/QM1.3",
              { red2: name }
            );
            const responseData3 = await postFormDataAsJson(
              "http://192.168.95.70:3000/qmmatches/QM2.1",
              { red2: name }
            );
            console.log({ responseData });
            console.log({ responseData2 });
            console.log({ responseData3 });
          } catch (error) {
            console.error(error);
          }
        }
        if (teamid == 8) {
          try {
            const responseData = await postFormDataAsJson(
              "http://192.168.95.70:3000/pmmatches/PM2",
              { blue2: name }
            );
            const responseData2 = await postFormDataAsJson(
              "http://192.168.95.70:3000/qmmatches/QM1.4",
              { red2: name }
            );
            const responseData3 = await postFormDataAsJson(
              "http://192.168.95.70:3000/qmmatches/QM2.4",
              { blue2: name }
            );
            console.log({ responseData });
            console.log({ responseData2 });
            console.log({ responseData3 });
          } catch (error) {
            console.error(error);
          }
        }
        if (teamid == 9) {
          try {
            const responseData = await postFormDataAsJson(
              "http://192.168.95.70:3000/pmmatches/PM3",
              { red1: name }
            );
            const responseData2 = await postFormDataAsJson(
              "http://192.168.95.70:3000/qmmatches/QM1.1",
              { blue1: name }
            );
            const responseData3 = await postFormDataAsJson(
              "http://192.168.95.70:3000/qmmatches/QM2.1",
              { blue1: name }
            );
            console.log({ responseData });
            console.log({ responseData2 });
            console.log({ responseData3 });
          } catch (error) {
            console.error(error);
          }
        }
        if (teamid == 10) {
          try {
            const responseData = await postFormDataAsJson(
              "http://192.168.95.70:3000/pmmatches/PM3",
              { red2: name }
            );
            const responseData2 = await postFormDataAsJson(
              "http://192.168.95.70:3000/qmmatches/QM1.2",
              { blue1: name }
            );
            const responseData3 = await postFormDataAsJson(
              "http://192.168.95.70:3000/qmmatches/QM2.4",
              { red1: name }
            );
            console.log({ responseData });
            console.log({ responseData2 });
            console.log({ responseData3 });
          } catch (error) {
            console.error(error);
          }
        }
        if (teamid == 11) {
          try {
            const responseData = await postFormDataAsJson(
              "http://192.168.95.70:3000/pmmatches/PM3",
              { blue1: name }
            );
            const responseData2 = await postFormDataAsJson(
              "http://192.168.95.70:3000/qmmatches/QM1.3",
              { blue1: name }
            );
            const responseData3 = await postFormDataAsJson(
              "http://192.168.95.70:3000/qmmatches/QM2.2",
              { red2: name }
            );
            console.log({ responseData });
            console.log({ responseData2 });
            console.log({ responseData3 });
          } catch (error) {
            console.error(error);
          }
        }
        if (teamid == 12) {
          try {
            const responseData = await postFormDataAsJson(
              "http://192.168.95.70:3000/pmmatches/PM3",
              { blue2: name }
            );
            const responseData2 = await postFormDataAsJson(
              "http://192.168.95.70:3000/qmmatches/QM1.4",
              { blue1: name }
            );
            const responseData3 = await postFormDataAsJson(
              "http://192.168.95.70:3000/qmmatches/QM2.3",
              { red1: name }
            );
            console.log({ responseData });
            console.log({ responseData2 });
            console.log({ responseData3 });
          } catch (error) {
            console.error(error);
          }
        }
        if (teamid == 13) {
          try {
            const responseData = await postFormDataAsJson(
              "http://192.168.95.70:3000/pmmatches/PM4",
              { red1: name }
            );
            const responseData2 = await postFormDataAsJson(
              "http://192.168.95.70:3000/qmmatches/QM1.1",
              { blue2: name }
            );
            const responseData3 = await postFormDataAsJson(
              "http://192.168.95.70:3000/qmmatches/QM2.2",
              { blue1: name }
            );
            console.log({ responseData });
            console.log({ responseData2 });
            console.log({ responseData3 });
          } catch (error) {
            console.error(error);
          }
        }
        if (teamid == 14) {
          try {
            const responseData = await postFormDataAsJson(
              "http://192.168.95.70:3000/pmmatches/PM4",
              { red2: name }
            );
            const responseData2 = await postFormDataAsJson(
              "http://192.168.95.70:3000/qmmatches/QM1.2",
              { blue2: name }
            );
            const responseData3 = await postFormDataAsJson(
              "http://192.168.95.70:3000/qmmatches/QM2.2",
              { red1: name }
            );
            console.log({ responseData });
            console.log({ responseData2 });
            console.log({ responseData3 });
          } catch (error) {
            console.error(error);
          }
        }
        if (teamid == 15) {
          try {
            const responseData = await postFormDataAsJson(
              "http://192.168.95.70:3000/pmmatches/PM4",
              { blue1: name }
            );
            const responseData2 = await postFormDataAsJson(
              "http://192.168.95.70:3000/qmmatches/QM1.3",
              { blue2: name }
            );
            const responseData3 = await postFormDataAsJson(
              "http://192.168.95.70:3000/qmmatches/QM2.3",
              { red2: name }
            );
            console.log({ responseData });
            console.log({ responseData2 });
            console.log({ responseData3 });
          } catch (error) {
            console.error(error);
          }
        }
        if (teamid == 16) {
          try {
            const responseData = await postFormDataAsJson(
              "http://192.168.95.70:3000/pmmatches/PM4",
              { blue2: name }
            );
            const responseData2 = await postFormDataAsJson(
              "http://192.168.95.70:3000/qmmatches/QM1.4",
              { blue2: name }
            );
            const responseData3 = await postFormDataAsJson(
              "http://192.168.95.70:3000/qmmatches/QM2.1",
              { red1: name }
            );
            console.log({ responseData });
            console.log({ responseData2 });
            console.log({ responseData3 });
          } catch (error) {
            console.error(error);
          }
        }
      }
      const Form1 = document.getElementById("form1");
      Form1.addEventListener("change", handleFormSubmit);
      Form1.addEventListener("change", send);
      const Form2 = document.getElementById("form2");
      Form2.addEventListener("change", handleFormSubmit);
      Form2.addEventListener("change", send);

      const Form3 = document.getElementById("form3");
      Form3.addEventListener("change", handleFormSubmit);
      Form3.addEventListener("change", send);

      const Form4 = document.getElementById("form4");
      Form4.addEventListener("change", handleFormSubmit);
      Form4.addEventListener("change", send);

      const Form5 = document.getElementById("form5");
      Form5.addEventListener("change", handleFormSubmit);
      Form5.addEventListener("change", send);

      const Form6 = document.getElementById("form6");
      Form6.addEventListener("change", handleFormSubmit);
      Form6.addEventListener("change", send);

      const Form7 = document.getElementById("form7");
      Form7.addEventListener("change", handleFormSubmit);
      Form7.addEventListener("change", send);

      const Form8 = document.getElementById("form8");
      Form8.addEventListener("change", handleFormSubmit);
      Form8.addEventListener("change", send);

      const Form9 = document.getElementById("form9");
      Form9.addEventListener("change", handleFormSubmit);
      Form9.addEventListener("change", send);

      const Form10 = document.getElementById("form10");
      Form10.addEventListener("change", handleFormSubmit);
      Form10.addEventListener("change", send);

      const Form11 = document.getElementById("form11");
      Form11.addEventListener("change", handleFormSubmit);
      Form11.addEventListener("change", send);

      const Form12 = document.getElementById("form12");
      Form12.addEventListener("change", handleFormSubmit);
      Form12.addEventListener("change", send);

      const Form13 = document.getElementById("form13");
      Form13.addEventListener("change", handleFormSubmit);
      Form13.addEventListener("change", send);

      const Form14 = document.getElementById("form14");
      Form14.addEventListener("change", handleFormSubmit);
      Form14.addEventListener("change", send);

      const Form15 = document.getElementById("form15");
      Form15.addEventListener("change", handleFormSubmit);
      Form15.addEventListener("change", send);

      const Form16 = document.getElementById("form16");
      Form16.addEventListener("change", handleFormSubmit);
      Form16.addEventListener("change", send);
    </script>
  </body>
</html>
